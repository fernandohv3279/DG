% \documentclass{article}
\documentclass{amsart}

\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{biblatex}
\usepackage{blindtext}
\usepackage{mathtools}
\usepackage{xcolor}

\addbibresource{project.bib}

\begin{document}

\newcommand{\R}{\mathbb{R}}
\newcommand\tbf[1]{\textbf{#1}}
\newcommand\myworries[1]{\textcolor{red}{\tbf{#1}}}
% \renewcommand\myworries[1]{}

\title{Basic differential geometry in cloaking}
\author{Fernando}
\date{\today}
\maketitle

\section{Introduction}
Electromagnetic cloaking is a technique used to make an object invisible or undetectable to electromagnetic waves (like visible light, radar, or microwaves). It works by guiding electromagnetic waves around the object, so they flow as if the object isn’t there.

This is usually done using metamaterials—artificial materials engineered to have specific properties not found in nature. These materials can bend and shape electromagnetic waves in unusual ways, creating a “cloak” that hides the object from detection.

In simple terms: instead of blocking or reflecting light, cloaking materials redirect it around the object, making it appear as if the waves traveled through empty space.

\section{Maxewell's equations}

Maxwell's equations describe how electric and magnetic fields interact and propagate. 
In terms of the electric field \(\mathbf{E}\) and magnetic field intensity \(\mathbf{H}\), 
they are given as:

\[
\nabla \cdot \mathbf{D} = \rho,
\]
stating that the electric charge density \(\rho\) generates the electric displacement field \(\mathbf{D}\);

\[
\nabla \cdot \mathbf{B} = 0,
\]
indicating the absence of magnetic monopoles;

\[
\nabla \times \mathbf{E} = -\frac{\partial \mathbf{B}}{\partial t},
\]
which describes how a time-varying magnetic field induces an electric field (Faraday's law);

\[
\nabla \times \mathbf{H} = \mathbf{J} + \frac{\partial \mathbf{D}}{\partial t},
\]
showing that magnetic fields are generated by electric currents \(\mathbf{J}\) 
and time-varying electric fields (Ampère-Maxwell law).

Here, the constitutive relations \(\mathbf{D} = \varepsilon \mathbf{E},
\mathbf{B}=\mu \mathbf{H},\mathbf{J}=\sigma \mathbf{E}\) relate the auxiliary fields to the primary fields 
through the permittivity \(\varepsilon\), permeability \(\mu\) and conductivity \(\sigma\) of the medium.

Together, these equations form the foundation of classical electromagnetism and explain how electromagnetic waves, such as light, propagate through space.

\newpage

Using the constitutive relations mentioned above, it is possible to write Maxwell's equations only in terms of \(E,H\) like this:
\begin{align*}
  \nabla \cdot \mathbf{E} &=\frac{\rho}{\varepsilon}\\
  \nabla \cdot \mathbf{H} &=0\\
  \nabla \times \mathbf{E} &= -\mu\frac{\partial \mathbf{H}}{\partial t}\\
  \nabla \times \mathbf{H} &= +\varepsilon\frac{\partial \mathbf{E}}{\partial t} + \sigma \mathbf{E}
\end{align*}

Under certain hypothesis that we will assume, it is possible to absorb the effect of
the term \(\sigma\mathbf{E}\) (last equation) into \(\varepsilon\).
This is what they do in \cite{ward96}; also they focus only on the last two equations and just keep the other two in mind.
So the equations we are working with are
\begin{align*}
  \nabla \times \mathbf{E} &= -\mu\frac{\partial \mathbf{H}}{\partial t}\\
  \nabla \times \mathbf{H} &= +\varepsilon\frac{\partial \mathbf{E}}{\partial t}.
\end{align*}

\section{Form invariance under change of coordinates} A surprising fact about Maxwell's equations is that under any change of
coordinates 
% According to \cite{thompson12}

\section{Example: cylindrical cloak}

This example is a famous cloak proposed in \cite{schurig06}.
\subsection{In cylindrical coordinates}
The idea is to blow up the origin into a circle, the inside of such circle, will be our cloaked region,
then we compress the space inside the circle into an annulus; see figure \ref{fig:cloak}.
\begin{figure}
  \begin{center}
    \includegraphics[width=0.5\textwidth]{figures/cloaked.png}
  \end{center}
  \caption{Cylindrical cloaking (taken from \cite{schurig06})}\label{fig:cloak}
\end{figure}

A simple transformation that achieves this is
\begin{align}\label{transformation}
\begin{cases}
r'=a+\frac{b-a}{b}r \quad 0\leq r\leq b\\ 
\theta'=\theta\\
z'=z
\end{cases},
\end{align}
for \(r>b\) the transformation will be the identity.

Since this transformation is expressed in terms of cylindrical coordinates,
the Jacobian we have to use is \([g']^{1/2}[J][g]^{-1/2}\),
where \(g',J,g\) are respectively

\[
  \begin{bmatrix}
    1 & 0 & 0\\
    0 & (r')^2 & 0\\
    0 & 0 & 1\\
  \end{bmatrix},
  \begin{bmatrix}
    \frac{b-a}{b} & 0 & 0\\
    0 & 1 & 0\\
    0 & 0 & 1\\
  \end{bmatrix},
  \begin{bmatrix}
    1 & 0 & 0\\
    0 & r^2 & 0\\
    0 & 0 & 1\\
  \end{bmatrix}
\]
So
\[J=
  \begin{bmatrix}
    \frac{b-a}{b}  & 0 & 0\\
    0 & \frac{r'}{r} & 0\\
    0 & 0 & 1\\
  \end{bmatrix},
\]
then
\[
  \det[J]=\frac{b-a}{b}\cdot\frac{r'}{r}
\]
and following the formula we obtain
\begin{align*}
  [\varepsilon'] =[\mu']= \frac{[J][J]^T}{\det[J]}&=\frac{1}{\det[J]}
  \begin{bmatrix}
    \left(\frac{b-a}{b}\right)^2  & 0 & 0\\
    0 & \left(\frac{r'}{r}\right)^2 & 0\\
    0 & 0 & 1\\
  \end{bmatrix}\\
  &=
  \begin{bmatrix}
    \frac{b-a}{b}\cdot\frac{r}{r'}  & 0 & 0\\
    0 & \frac{b}{b-a}\cdot\frac{r'}{r} & 0\\
    0 & 0 & \frac{b}{b-a}\cdot\frac{r}{r'}\\
  \end{bmatrix},
\end{align*}
Now, let's replace \(r\) by \((r'-a)\frac{b}{b-a}\) to have everything
in terms of the new coordinates. This reduces to:
\begin{align}
  [\varepsilon'] =[\mu']=\begin{bmatrix}
    \frac{r'-a}{r'} & 0 & 0\\
    0 & \frac{r'}{r'-a} & 0\\
    0 & 0 & \left(\frac{b}{b-a}\right)^2\frac{r'-a}{r'}\\
  \end{bmatrix}
\end{align}

\subsection{In Cartesian coordinates}
In some specific cases


\section{Theory}
This section was taken from \cite{ward96}, specifically sections 1 and 2.
\myworries{\\Reorganize this section??}
\subsection{Summary of section 1 from Pendry's article}
We start with Maxewell's equations:\myworries{ Is this in Cartesian coordinates? Should we start with cylindrical?}
\begin{align*}
  \nabla \times \tbf{E} &= -\mu \mu_0 \partial \tbf{H} /\partial t\\
  \nabla \times \tbf{H} &= +\varepsilon \varepsilon_0 \partial \tbf{E} /\partial t,
\end{align*}
and then consider a transformation
\[
q_1(x,y,z), \quad q_2(x,y,z), \quad q_3(x,y,z).
\]

\tbf{Question:} What form does the new set of equations take when
expressed in terms of $q_1,q_2,q_3$?

\tbf{Answer:} In the new system of coordinates, Maxwell's equations become
\begin{align*}
  \nabla_q \times \widehat{\tbf{E}} &= -\mu_0\hat{\mu} \partial \widehat{\tbf{H}}/\partial t\\
  \nabla_q \times \widehat{\tbf{H}} &= +\varepsilon_0 \hat{\varepsilon} \partial \widehat{\tbf{E}}/\partial t,
\end{align*}
where $\hat{\mu}$ and $\hat{\varepsilon}$ are in general tensors and $\widehat{\tbf{E}},\widehat{\tbf{H}}$ are the transformed versions of \tbf{E,H}
In other words, the form of Maxewell's equations is preserved by a coordinate transformation, it just changes the definition of $\varepsilon,\mu$.
\subsection{Summary of section 2 from Pendry's article}
We define three unit vectors $\tbf{u}_1,\tbf{u}_2,\tbf{u}_3,$ to point along the generalized $q_1,q_2,q_3$ axes.
We also define
\begin{equation}\label{matrixQ}
  Q_{ij}=\frac{\partial x}{\partial q_i}\frac{\partial x}{\partial q_j}+\frac{\partial y}{\partial q_i}\frac{\partial y}{\partial q_j}+\frac{\partial z}{\partial q_i}\frac{\partial z}{\partial q_j},
\end{equation}
For convenience we will denote $Q_i=\sqrt{Q_{ii}}$.

Another definition we need is
\begin{equation}\label{matrixg}
  g^{-1}=[u_i\cdot u_j]=\begin{bmatrix}
    \tbf{u}_1\cdot \tbf{u}_1 & \tbf{u}_1\cdot \tbf{u}_2 & \tbf{u}_1\cdot \tbf{u}_3 \\
    \tbf{u}_2\cdot \tbf{u}_1 & \tbf{u}_2\cdot \tbf{u}_2 & \tbf{u}_2\cdot \tbf{u}_3 \\
    \tbf{u}_3\cdot \tbf{u}_1 & \tbf{u}_3\cdot \tbf{u}_2 & \tbf{u}_3\cdot \tbf{u}_3
  \end{bmatrix}.
\end{equation}
Now we are ready to define $\hat{\mu},\hat{\varepsilon}$. According to \cite{ward96} they are
\begin{align}
  \hat{\mu}^{ij}=\mu g^{ij}|\tbf{u}_1\cdot(\tbf{u}_2\times \tbf{u}_3)|Q_1Q_2Q_3(Q_iQ_j)^{-1}\\
  \hat{\varepsilon}^{ij}=\varepsilon g^{ij}|\tbf{u}_1\cdot(\tbf{u}_2\times \tbf{u}_3)|Q_1Q_2Q_3(Q_iQ_j)^{-1} \nonumber
\end{align}

\section{Geometric transformation 1}
The transformation we want is the following
\[\begin{cases}
  q_1(r,\theta,z)=a+r(b-a)/b\\
  q_2(r,\theta,z)=\theta\\
  q_3(r,\theta,z)=z\\
\end{cases}\]
Notice that it is writen in terms of cylindrical coordinates
(from cylindrical to cylindrical), but we can move from cylindrical
to cartesian with the usual change of variables:
\begin{equation}
  \begin{cases}\label{cylindrical}
  x=r\cos\theta\\
  y=r\sin\theta\\
  z=z\\
\end{cases}
\end{equation}

Let's apply the formulas from the previous section to the transformation:
\[\begin{cases}
  q_1(x,y,z)=a+r(b-a)/b\\
  q_2(x,y,z)=\theta\\
q_3(x,y,z)=z\\
\end{cases}.\]
Here I kept the transformation in terms of $r,\theta,z$ in order to have cleaner looking formulas.
We can write $r,\theta,z$ in terms of $x,y,z$ if we wanted.

Now we neeq $x,y,z$ in terms of $q_1,q_2,q_3$, for this we note that:
\[\begin{cases}
r=\frac{q_1-a}{b-a}b=\frac{b}{b-a}q_1-\frac{ba}{b-a}\\
\theta=q_2\\
z=q_3\\
\end{cases}.\]
Again this is in terms of $r,\theta,z$ for simplicity, but combining this with (\ref{cylindrical})
we get $x,y,z$ in terms of $q_1,q_2,q_3$.

Now we use (\ref{matrixQ}) to compute $Q_{ij}$.
\begin{align*}
Q_{11}
=&\frac{\partial x}{\partial q_1}\frac{\partial x}{\partial q_1}
+\frac{\partial y}{\partial q_1}\frac{\partial y}{\partial q_1}
+\frac{\partial z}{\partial q_1}\frac{\partial z}{\partial q_1}\\
=&\left(\frac{\partial x}{\partial q_1}\right)^2+\left(\frac{\partial y}{\partial q_1}\right)^2+0\\
=&\left(\frac{\partial (r\cos\theta)}{\partial q_1}\right)^2+\left(\frac{\partial (r\sin\theta)}{\partial q_1}\right)^2\\
=&\left(\cos\theta\frac{\partial r}{\partial q_1}\right)^2+\left(\sin\theta\frac{\partial r}{\partial q_1}\right)^2\\
=&\left(\frac{\partial r}{\partial q_1}\right)^2\\
=&\left(\frac{b}{b-a}\right)^2
\end{align*}

\begin{align*}
Q_{22}
=&\frac{\partial x}{\partial q_2}\frac{\partial x}{\partial q_2}
+\frac{\partial y}{\partial q_2}\frac{\partial y}{\partial q_2}
+\frac{\partial z}{\partial q_2}\frac{\partial z}{\partial q_2}\\
=&\left(\frac{\partial x}{\partial q_2}\right)^2+\left(\frac{\partial y}{\partial q_2}\right)^2+0\\
=&\left(r\frac{\partial \cos\theta}{\partial q_2}\right)^2+\left(r\frac{\partial \sin\theta}{\partial q_2}\right)^2\\
=&\left(-r\sin\theta\frac{\partial \theta}{\partial q_2}\right)^2+\left(r\cos\theta\frac{\partial \theta}{\partial q_2}\right)^2\\
=&r^2\left(\frac{\partial \theta}{\partial q_2}\right)^2\\
=&r^2
\end{align*}

\begin{align*}
Q_{33}
=&\frac{\partial r}{\partial q_3}\frac{\partial r}{\partial q_3}
+\frac{\partial \theta}{\partial q_3}\frac{\partial \theta}{\partial q_3}
+\frac{\partial z}{\partial q_3}\frac{\partial z}{\partial q_3}\\
=&0+0+1\\
=&1
\end{align*}

For $Q_{ij}$ where $i\neq j$ we have $Q_{ij}=0$. So our matrix $Q$ is
\[
  Q=\begin{bmatrix}
    \left(\frac{b}{b-a}\right)^2 & 0 & 0\\
    0 & r^2 & 0\\
    0 & 0 & 1
  \end{bmatrix}
\]

Now we need the unit vectors that point along each axis. They are $u_1=\widehat{q_1},u_2=\widehat{q_2},u_3=\widehat{q_3}$,
then
\[
  g^{-1}=
  [u_iu_j]=
  \begin{bmatrix}
    1 & 0 & 0\\
    0 & 1 & 0\\
    0 & 0 & 1
  \end{bmatrix}
\]
Then $\hat{\mu}_{ij}=0$ for $i\neq j$ and for $i=j$ we have
\begin{align*}
  \hat{\mu}_{11}=\mu|u_1\cdot(u_2\times u_3)|Q_1Q_2Q_3Q_1^{-2}
  &=\mu|u_1\cdot(u_2\times u_3)|Q_2Q_3Q_1^{-1}\\
  &=\mu|u_1\cdot(u_2\times u_3)|Q_1^{-1}\\
  &=\mu|u_1\cdot\hat{r}|Q_1^{-1}\\
  &=\mu Q_1^{-1}\qquad (???)\\
  &=\mu \frac{R_2-R_1}{R_2}
\end{align*}

\begin{align*}
  \hat{\mu}_{22}=\mu|u_1\cdot(u_2\times u_3)|Q_1Q_2Q_3Q_2^{-2}
  &=\mu|u_1\cdot(u_2\times u_3)|Q_1Q_3Q_2^{-1}\\
  &=\mu|u_1\cdot(u_2\times u_3)|Q_1\\
  &=\mu|u_1\cdot\hat{r}|Q_1\\
  &=\mu Q_1\qquad (????)\\
  &=\mu \frac{R_2}{R_2-R_1}
\end{align*}

\begin{align*}
  \hat{\mu}_{33}=\mu|u_1\cdot(u_2\times u_3)|Q_1Q_2Q_3Q_3^{-2}
  &=\mu|u_1\cdot(u_2\times u_3)|Q_1Q_2Q_3^{-1}\\
  &=\mu|u_1\cdot(u_2\times u_3)|Q_1\\
  &=\mu|u_1\cdot\hat{r}|Q_1\\
  &=\mu Q_1\qquad (????)\\
  &=\mu \frac{R_2}{R_2-R_1}
\end{align*}

% \printbibliography

\end{document}
